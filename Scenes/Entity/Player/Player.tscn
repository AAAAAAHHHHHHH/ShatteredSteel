[gd_scene load_steps=25 format=3 uid="uid://dyeqfl8b43yw2"]

[ext_resource type="Script" uid="uid://hrcgcwwbv5kh" path="res://Scripts/Player.gd" id="1_ka4io"]
[ext_resource type="Texture2D" uid="uid://b1m5xxpx6kmkv" path="res://Assets/Player.ktx" id="2_uwkt8"]
[ext_resource type="Script" uid="uid://ijb7mljfpwcm" path="res://Scripts/Resources/finiteStateMachine.gd" id="3_ghsau"]
[ext_resource type="Script" uid="uid://dw4pw3b1ujxtn" path="res://Scripts/States/PlayerStates/idleState.gd" id="4_051wf"]
[ext_resource type="Script" uid="uid://x5i0dl30cssp" path="res://Scripts/States/PlayerStates/fallState.gd" id="5_hvqaw"]
[ext_resource type="Script" uid="uid://cri5hnxskavfs" path="res://Scripts/States/PlayerStates/walkState.gd" id="6_w128n"]
[ext_resource type="Script" uid="uid://bv8k3s3wpkusn" path="res://Scripts/States/PlayerStates/runState.gd" id="7_8vk4f"]
[ext_resource type="Script" uid="uid://6lkky4hfymds" path="res://Scripts/States/PlayerStates/startJump.gd" id="8_8vk4f"]
[ext_resource type="Script" uid="uid://dcc26a5kw02ts" path="res://Scripts/States/PlayerStates/slowdownState.gd" id="9_0xky0"]
[ext_resource type="Script" uid="uid://dfn17g18i6x23" path="res://Scripts/States/PlayerStates/jumpState.gd" id="11_yk0uc"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_2846a"]
radius = 37.0
height = 210.0

[sub_resource type="Animation" id="Animation_ttkxq"]
resource_name = "Falling"
length = 0.500005
loop_mode = 1
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.208333),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [43, 44]
}

[sub_resource type="Animation" id="Animation_j60po"]
resource_name = "HighLand"
length = 0.500005
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0416667, 0.333333, 0.458333),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [45, 46, 47, 48]
}

[sub_resource type="Animation" id="Animation_1bstl"]
resource_name = "IdleJumpStart"
length = 0.166671
step = 0.0416667
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MainFSM/PlayerStartJump")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.125),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"HandleState"
}]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0416667, 0.0833333, 0.125),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [36, 37, 38, 39]
}

[sub_resource type="Animation" id="Animation_8iqms"]
resource_name = "IdleStanding"
loop_mode = 1
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.502829),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [14, 15]
}

[sub_resource type="Animation" id="Animation_bkqu3"]
resource_name = "JumpIdle"
length = 0.500005
loop_mode = 1
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.208333),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [41, 42]
}

[sub_resource type="Animation" id="Animation_0cceh"]
resource_name = "Landing"
length = 0.250004
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.125),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [45, 48]
}

[sub_resource type="Animation" id="Animation_epbei"]
resource_name = "LowLanding"
length = 0.125004
step = 0.0416667

[sub_resource type="Animation" id="Animation_paosx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MainFSM/PlayerSlowdown:runStopIdle")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MainFSM/PlayerSlowdown:walkStopIdle")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_eepyi"]
resource_name = "Run"
length = 0.666671
loop_mode = 1
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.166667, 0.333333, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [4, 5, 6, 7]
}

[sub_resource type="Animation" id="Animation_rc7sg"]
resource_name = "RunJumpStart"
length = 0.0833376
step = 0.0416667
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MainFSM/PlayerStartJump")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0833333),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"HandleState"
}]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0416709),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [36, 40]
}

[sub_resource type="Animation" id="Animation_6f2l2"]
resource_name = "Walk"
loop_mode = 1
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.250427, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}

[sub_resource type="Animation" id="Animation_410xb"]
resource_name = "WalkJumpStart"
length = 0.0833376
step = 0.0416667
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MainFSM/PlayerStartJump")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0833333),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"HandleState"
}]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0416667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [36, 39]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qumrt"]
_data = {
&"Falling": SubResource("Animation_ttkxq"),
&"HighLand": SubResource("Animation_j60po"),
&"IdleJumpStart": SubResource("Animation_1bstl"),
&"IdleStanding": SubResource("Animation_8iqms"),
&"JumpIdle": SubResource("Animation_bkqu3"),
&"Landing": SubResource("Animation_0cceh"),
&"LowLanding": SubResource("Animation_epbei"),
&"RESET": SubResource("Animation_paosx"),
&"Run": SubResource("Animation_eepyi"),
&"RunJumpStart": SubResource("Animation_rc7sg"),
&"Walk": SubResource("Animation_6f2l2"),
&"WalkJumpStart": SubResource("Animation_410xb")
}

[node name="Player" type="CharacterBody2D"]
script = ExtResource("1_ka4io")

[node name="Sprite" type="Sprite2D" parent="."]
unique_name_in_owner = true
position = Vector2(12.49, 0)
scale = Vector2(0.5, 0.5)
texture = ExtResource("2_uwkt8")
hframes = 8
vframes = 8

[node name="Collider" type="CollisionShape2D" parent="."]
unique_name_in_owner = true
position = Vector2(-4, 20)
shape = SubResource("CapsuleShape2D_2846a")

[node name="Animator" type="AnimationPlayer" parent="."]
unique_name_in_owner = true
libraries = {
&"": SubResource("AnimationLibrary_qumrt")
}

[node name="Camera2D" type="Camera2D" parent="."]
position_smoothing_enabled = true
position_smoothing_speed = 15.0

[node name="MainFSM" type="Node" parent="." node_paths=PackedStringArray("state")]
unique_name_in_owner = true
script = ExtResource("3_ghsau")
state = NodePath("PlayerIdle")
metadata/_custom_type_script = "uid://ijb7mljfpwcm"

[node name="PlayerIdle" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("4_051wf")
actor = NodePath("../..")
animator = NodePath("../../Animator")
metadata/_custom_type_script = "uid://dw4pw3b1ujxtn"

[node name="PlayerSlowdown" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("9_0xky0")
actor = NodePath("../..")
animator = NodePath("../../Animator")
metadata/_custom_type_script = "uid://dcc26a5kw02ts"

[node name="PlayerWalking" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("6_w128n")
actor = NodePath("../..")
animator = NodePath("../../Animator")
metadata/_custom_type_script = "uid://cri5hnxskavfs"

[node name="PlayerRuning" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("7_8vk4f")
actor = NodePath("../..")
animator = NodePath("../../Animator")
metadata/_custom_type_script = "uid://bv8k3s3wpkusn"

[node name="PlayerStartJump" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("8_8vk4f")
actor = NodePath("../..")
animator = NodePath("../../Animator")
metadata/_custom_type_script = "uid://6lkky4hfymds"

[node name="PlayerFalling" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("5_hvqaw")
actor = NodePath("../..")
animator = NodePath("../../Animator")
metadata/_custom_type_script = "uid://x5i0dl30cssp"

[node name="PlayerJump" type="Node" parent="MainFSM" node_paths=PackedStringArray("actor", "animator")]
unique_name_in_owner = true
script = ExtResource("11_yk0uc")
actor = NodePath("../..")
animator = NodePath("../../Animator")
jumpIdleAnimation = "JumpIdle"
metadata/_custom_type_script = "uid://dfn17g18i6x23"

[node name="Timers" type="Node" parent="."]

[node name="JumpBufferTimer" type="Timer" parent="Timers"]
unique_name_in_owner = true
one_shot = true

[node name="CoyoteTimer" type="Timer" parent="Timers"]
unique_name_in_owner = true
one_shot = true

[node name="Raycasts" type="Node2D" parent="."]

[node name="WallJump" type="Node2D" parent="Raycasts"]

[node name="BottomLeft" type="RayCast2D" parent="Raycasts/WallJump"]

[node name="BottomRight" type="RayCast2D" parent="Raycasts/WallJump"]
